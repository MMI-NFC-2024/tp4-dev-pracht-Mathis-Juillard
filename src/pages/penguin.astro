---
import Layout from "../layouts/Layout.astro";
---
<Layout title="TP4 — Penguins (scatter)">
  <h2 style="margin:0 0 1rem">Penguins — Scatterplot</h2>
  <div id="vis"></div>

  <script>
    import * as Plot from "@observablehq/plot";
    import penguinsRaw from "../assets/penguins.json";

    const data = penguinsRaw
      .filter(d => d.culmen_length_mm != null && d.culmen_depth_mm != null)
      .map(d => ({
        ...d,
        culmen_length_mm: +d.culmen_length_mm,
        culmen_depth_mm: +d.culmen_depth_mm
      }));

    const root = document.querySelector("#vis");
    root.innerHTML = "";
    const plot = Plot.plot({
      width: 920,
      height: 500,
      marks: [
        Plot.dot(data, {
          x: "culmen_length_mm",
          y: "culmen_depth_mm",
          stroke: "species",
          fill: "species",
          r: 3.5,
          tip: true
        })
      ],
      x: { label: "Culmen length (mm)", grid: true },
      y: { label: "Culmen depth (mm)", grid: true },
      color: { legend: true }
    });
    root.append(plot);
  </script>
</Layout>
